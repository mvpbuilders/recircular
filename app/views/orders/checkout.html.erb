<div class="container my-5">
  <div class="row">
    
    <!-- Columna izquierda: formulario -->
    <div class="col-md-7">
      <h2 class="h5 mb-4">Dirección de envío</h2>
      
      <%= form_with url: orders_path, method: :post, local: true do |f| %>
        <div class="mb-3">
          <%= f.label :email, "Email" %>
          <%= f.email_field :email, class: "form-control", required: true %>
        </div>

        <div class="mb-3">
          <%= f.label :direccion, "Dirección de envío" %>
          <%= f.text_field :direccion, class: "form-control", required: true %>
        </div>

        <div class="mb-3">
          <%= f.label :envio, "Zona de envío" %>
          <%= f.select :envio, [["CABA - $5.000", 5000], ["AMBA - $7.000", 7000], ["ARGENTINA - $10.000", 10000]], {}, class: "form-control", required: true %>
        </div>

        <%= f.submit "Confirmar y pagar", class: "btn btn-dark w-100 mt-4" %>
      <% end %>
    </div>

    <!-- Columna derecha: resumen -->
    <div class="col-md-5">
      <div class="card p-4 rounded shadow-sm">
        <h4 class="mb-4">Resumen del pedido</h4>

        <% @cart_products.each do |product| %>
          <div class="d-flex align-items-center mb-3">
            <% if product.images.attached? %>
              <%= image_tag url_for(product.images.first), alt: product.title, class: "rounded me-3", style: "width: 64px; height: 64px; object-fit: cover;" %>
            <% end %>
            <div>
              <strong><%= product.title %></strong><br>
              <span class="text-muted">$<%= number_with_delimiter(product.precio, delimiter: ".") %></span>
            </div>
          </div>
        <% end %>

        <hr>
        <p class="mb-1"><strong>Envío:</strong> Se calcula al confirmar</p>
        <p class="h5 mt-2"><strong>Total:</strong> $<%= number_with_delimiter(@total, delimiter: ".") %></p>
      </div>
    </div>

  </div>
</div>
